exports.solve = function(fileName) {
  let input = readInput(fileName)
  let result = readFormula(input)
  return result
}

// gets the input file name and returns an array with all the text lines on it
function readInput(fileName) {
  let fs = require("fs");
  let text  = fs.readFileSync('./Examples/' + fileName, "utf8").split('\n'); //  an array containing lines of text extracted from the file.
  return text;
}

function readFormula(text) {
  let result = { 'expressions': [], 'values': [] }
  text.shift(); // removes the first element of array
  result.expressions = readExpressions(text);
  result.values = readValues(text);
  return result;
}

function readExpressions(text) {
  let arrExpressions = [];
  for(let i = 0; i < text.length; i++) {
    arrExpressions[i] = ''; // initializes with an empty string
    for(let j = 0; j < text[i].length; j++) {
      if(text[i][j] !== ' ' && text[i][j] != 0 && text[i][j] != 1) { // if char is from expr
        arrExpressions[i] += text[i][j]; // concat the char
      }
    }
    arrExpressions[i] = arrExpressions[i].replace('{', '').replace('}', '').split(','); // replaces '{' and splits
  }
  return arrExpressions;
}

// gets the vlues array for each line
function readValues(text) {
  let arrValues = [];
  for(let i = 0; i < text.length; i++) {
    let value = [];
    for(let j = 0; j < text[i].length; j++) {
      if(text[i][j] !== ' ' && (text[i][j] == 0 || text[i][j] == 1)) {
        value.push(text[i][j]);
      }
    }
    arrValues.push(value);
  }
  return arrValues;
}

